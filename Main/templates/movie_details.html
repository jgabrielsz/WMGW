{% extends 'base_home.html' %}

{% block title %}
    Movie Details
{% endblock %}

{% block content %}

    <!-- Success Login Message  --> 
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
            <div class="container w-50">
                <div class="alert_success">
                    {{ message }}
                </div>
            </div>
        {% endfor %}
    {% endif %}
    {% endwith %}

        <div id="container-details" class="container text-center text-white p-4 big-border transparent">
            <div class="flex-column">
                
                {% if in_list %}    
                    <form action="/remove_to_list" method="post">
                        <input type="hidden" name="id" value="{{movie['id']}}">
                        <button class="list-icon" type="submit">
                            <img src="../../static/imgs/trash.png" alt="trash">
                            Remove to list
                        </button>
                    </form>
                {% else %}
                    <form action="/add_to_list" method="post">
                        <input type="hidden" name="id" value="{{movie['id']}}">
                        <button class="list-icon" type="submit">
                            <img src="../../static/imgs/checkbox.png" alt="checkbox">
                            Add to list
                        </button>
                    </form>
                {% endif %}
                
            
            <h2 class="categorie pb-3">Movie Details</h2>
            </div>
            <div class="flex-column flex-sm-row d-sm-flex aligh-items-center">
                <div class="poster_big">
                    <img src="../../static/posters/{{movie['id']}}.jpg" onerror="this.onerror=null; this.src='../../static/poster_not_found.jpg'" alt="poster">
                </div>

                <div class="container p-5 col-md-6 text-center text-md-start">
                    <h5 class="details">{{ movie['title']}}</h5>
                    <h5 class="details">{{ movie['year']}}</h5>
                    <h5 class="details">{{ movie['genres']}}</h5>
                    
                    {% for star in movie['rating'] %}
                        {% if star == 1 %}    
                            <span class="fa fa-star checked"></span>
                        {% else %}
                            <span class="fa fa-star"></span>
                        {% endif %}
                    {% endfor %}
                    <h6 class="detail">IMDB Rating</h5>
                    <div class="details text-center justify-content-sm-evenly d-sm-flex mt-3">
                        <div class="details">Directors:
                            <br>
                            {% for director in movie['directors'] %}
                                {% if director %}
                                    {{ director['name'] }} <br>
                                {% endif %} 
                            {% endfor %}
                        </div>
                        <div class="details">Writers:
                            <br>
                            {% for writer in movie['writers'] %}
                                {% if writer %}
                                    {{ writer['name'] }} <br>
                                {% endif %} 
                            {% endfor %}
                        </div>
                    </div>
                    <div class="redeable text-start">
                        <br>
                        <div class="details pb-2">
                            Plot:
                        </div>
                        <div>{{movie['plot'][0]}}</div>
                    </div>
                </div>
            </div>
        </div>
{% endblock %}
